<html lang="en">
<head>
    <meta charset="utf-8">
</head>
<body>
    <form id="pa-form" name="payForm" method="post" action="https://test.sagepay.com/mpitools/accesscontroler?action=pareq">
        <input type="hidden" name="PaReq" value="">
        <input type="hidden" name="TermUrl" value="">
        <input type="hidden" name="MD" value="">
    </form>
    <script>
        function findGetParameter(parameterName) {
            var result = null,
                tmp = [];

            location.search
                .substr(1)
                .split("&")
                .forEach(function (item) {
                  tmp = item.split("=");
                  if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
                });
            return result;
        }

        // document.payForm.setAttribute('action', findGetParameter('url'));
        document.querySelector('[name="PaReq"]').value = findGetParameter('pa');
        document.querySelector('[name="TermUrl"]').value = findGetParameter('term');
        document.querySelector('[name="MD"]').value = findGetParameter('md');
        document.payForm.submit();
    </script>
</body>
</html>

